!function(){function t(t){this.state=[],this.highlightClass=t}function e(){}function s(){this.ignore=f.IGNORE,this.verifyRule=s.rule,this.eleOut=h('<div class="sensors-jssdk-modal sensors-jssdk-fade" id="sensorsdata_vtrack_floatlayer_out" tabindex="-1" role="dialog" aria-hidden="true" sensors_ignore_tag="all"></div>'),this.eleOut.appendTo(h(document.body)),this.tpl=l.template.popover_box,this.eleOut.on("hide.bs.modal",function(){b.removeAll()})}function n(t){this.tpl=l.template.head_box,this.bar=null,this.btnDefine=null,this.btnTest=null,this.btnQuit=null,this.btnMini=null,this.data=t.data,this.init()}function i(t){this.dataStore=[],this.maxStoreTime=10,this.init()}function r(){this.switchNav()}function o(){this.eleOut_=null,this.templateOut_=l.template.define_url,this.vtrackDeleteUrl=c.vtrackDeleteUrl,this.vtrackDeployUrl=c.vtrackDeployUrl,this.init()}function a(){this.eleOut_=null,this.templateOut_=l.template.trigger_box,this.eleTitleChange=null,this.dataTitleChange=!1,this.dataToDelete=[],this.vtrackDeleteUrl=c.vtrackDeleteUrl,this.vtrackDeployUrl=c.vtrackDeployUrl,this.init()}var l=window.sensorsDataAnalytic201505;if(l=window[l],"function"!=typeof l&&"object"!=typeof l||!l.has_load_sdk||l.has_load_vendor)return!1;l.has_load_vendor=!0;var d=l._,c=l.sdkMain,u={};l.sdkVisual=u;var h=l.$,f=c.SAS,g={};!function(){function t(t){var e='<div class="sensors-jssdk-trigger-box-out"> <div class="sensors-jssdk-trigger-box-header sensors-jssdk-clearfix"> 所有已埋点页面 </div> <div class="sensors-jssdk-trigger-box-content"> <ul> ';for(var s in t){e+=' <li class="sensors-jssdk-trigger-box-content-li"> <div class="sensors-jssdk-clearfix sensors-jssdk-trigger-box-content-title"> <span>'+(s||"")+'</span> </div> <ul class="sensors-jssdk-trigger-box-content-list"> ';for(var n in t[s])e+=' <li class="sensors-jssdk-clearfix"> <a href="'+t[s][n]+'" title="'+t[s][n]+'" target="_blank"> ... '+n+" </a> </li> ";e+=" </ul> </li> "}return e+=" </ul> </div></div>"}var e=t;(function(t){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},s=t?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(s,function(t){return e[t]||t}):""}})();g.gtemplate=g.gtemplate||{},g.gtemplate.define_url=e}(),function(){function t(t){var e='<div class="sensors-jssdk-head-out" sensors_ignore_tag="all"> <div class="sensors-jssdk-head-in"> <div class="sensors-jssdk-head-in-right">  <button class="sensors-jssdk-btn" data-sensors-action="define_url">切换已埋点页面</button> <button class="sensors-jssdk-btn" data-sensors-action="trigger_box">本页埋点</button> <button class="sensors-jssdk-btn" data-sensors-action="exit_login">退出</button> <button class="sensors-jssdk-btn" style="background:#097;font-weight:bold;" data-sensors-action="mini-right"> &gt; </button>  <!-- <button class="sensors-jssdk-btn" style="display:none;background:#097;font-weight:bold;" data-sensors-action="mini-right-2"> &lt; </button>           --> </div> <div class="sensors-jssdk-head-in-left"> <a href="javascript:;" style="cursor:move;background:url(https://www.sensorsdata.cn/img/logo-6a5f89d488.svg) no-repeat scroll center center / 120px 41px;display: inline-block;height:40px;text-decoration:none !important;width: 130px;"> </a> </div> <div class="sensors-jssdk-head-in-main"> <button data-sensors-action="define_mode" class="sensors-jssdk-btn';return"defineMode"===t.navStatus&&(e+=" sensors-jssdk-btn-success"),e+='" >埋点模式</button> <button data-sensors-action="test_mode" class="sensors-jssdk-btn',"testMode"===t.navStatus&&(e+=" sensors-jssdk-btn-success"),e+='" >测试模式</button> </div>  </div> </div>'}var e=t;(function(t){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},s=t?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(s,function(t){return e[t]||t}):""}})();g.gtemplate=g.gtemplate||{},g.gtemplate.head_box=e}(),function(){function t(t){var e='<div class="sensors-jssdk-modal-dialog sensors-jssdk-modal-box"> <div class="sensors-jssdk-modal-content"> <div class="sensors-jssdk-modal-header"> <button type="button" class="sensors-jssdk-close" data-dismiss="modal" aria-hidden="true"> &times; </button> <div class="sensors-jssdk-color-green" style="font-size: 14px;line-height:1;font-weight:bold;margin:0;"> 添加埋点 </div> </div> <div class="sensors-jssdk-modal-body"><div style="position: relative;padding:0;margin:0;"><div style="color:#f11;display:none;padding: 5px 0;text-align: left;" class="sensors-jssdk-popover-head-error-notice"></div> <div class="sensors-jssdk-popover-line"> <p class="sensors-jssdk-color-green">事件名</p> <div> <input class="sensors-jssdk-input-large" type="text" data-name="name" value="'+(t.name||"")+'" placeholder="支持英文、数字和下划线"/> </div> </div> <div class="sensors-jssdk-popover-line"> <p class="sensors-jssdk-color-green">事件显示名</p> <div> <input class="sensors-jssdk-input-large" type="text" data-name="cname" value="'+(t.cname||"")+'"/> </div> </div> <div class="sensors-jssdk-popover-line sensors-jssdk-popover-line-url-radio">  <p class="sensors-jssdk-color-green">URL匹配方式</p> <div class="clearfix"> <div class="sensors-jssdk-gselectbox-out"> <select data-name="sensorsdata-vtrack-url-radio"> <option value="fixed">固定URL</option> <option value="part">部分匹配</option> <option title="可以使用js正则表达式匹配url" value="regexp">正则匹配</option> </select> </div> <input style="float:right; width: 69%; height: 36px;" class="sensors-jssdk-input-large" type="text" data-name="url" value="'+(t.url||"")+'"/>             </div> </div> <div class="sensors-jssdk-popover-line"> <p class="sensors-jssdk-color-green">限定元素内容</p> <div class="sensors-jssdk-clearfix">  <div class="sensors-jssdk-gselectbox-out"> <select data-name="selfTextCheck"> <option value="no">否</option> <option value="yes">是</option> </select> </div> <input style="float:right; width: 69%; height: 36px;" type="text" data-name="selfText" value="'+(t.selfText||"")+'"/> </div> </div> <p> <a href="javascript:;" class="sensors-jssdk-popover-button">添加埋点</a> </p> </div> </div> </div> </div>';return e}var e=t;(function(t){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},s=t?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(s,function(t){return e[t]||t}):""}})();g.gtemplate=g.gtemplate||{},g.gtemplate.popover_box=e}(),function(){function t(t){var e='<div id="sensors_jssdk_right_box" class="sensors-jssdk-right-box" style="border-radius: 2px;box-shadow:-3px 3px 6px #555;font-family: monospace;font-size:12px;line-height:12px;width: 300px; right: 0px; background: #eee; opacity:0.95; top:0; bottom:68px; position: fixed; z-index: 99999; overflow-y:auto;"> <section> <header style="cursor:move;padding:10px 20px;background:#2e384a;color:#ececee;"> 已触发事件 </header> <ul> </ul> </section></div>';return e}var e=t;(function(t){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},s=t?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(s,function(t){return e[t]||t}):""}})();g.gtemplate=g.gtemplate||{},g.gtemplate.testmode_box=e}(),function(){function t(t){var e='<div class="sensors-jssdk-trigger-box-out"> <div class="sensors-jssdk-trigger-box-header sensors-jssdk-clearfix"> <button class="sensors-jssdk-trigger-box-deploy-btn" style="background:#19b27b;border:none;border-radius: 4px;color: #fff;float: right;padding: 6px;cursor: pointer;font-size:14px;font-weight:bold;">部署生效</button> <span class="sensors-jssdk-trigger-box-header-title-change">您有新的改动，需要部署才能生效</span> </div> <div class="sensors-jssdk-trigger-box-content"> <ul> ';for(var s in t){e+=' <li class="sensors-jssdk-trigger-box-content-li"> <div class="sensors-jssdk-clearfix sensors-jssdk-trigger-box-content-title"> <!--<span class="sensors-jssdk-trigger-box-content-delete"> X </span>--> <span>'+(t[s].cname||"")+(" ( "+t[s].name+" ) "||"")+'</span> </div> <ul class="sensors-jssdk-trigger-box-content-list"> ';var n=t[s].triggers;if(n)for(var i,r=-1,o=n.length-1;o>r;)i=n[r+=1],e+=' <li class="sensors-jssdk-clearfix ',(i.to_del||!i.deployed)&&(e+="sensors-jssdk-trigger-box-attention-red"),e+='" data-trigger="'+String(i.trigger_id)+'" data-deploy="'+String(i.deployed)+'">  ',e+=i.to_del?' <span class="sensors-jssdk-trigger-box-left-sign"> — </span> <span class="sensors-jssdk-trigger-box-condition"><strike>点击 '+(i.nthEle.join(" ")+(i.selfAttr.text?"且包含内容"+i.selfAttr.text:""))+"</strike></span> ":i.deployed?' <span class="sensors-jssdk-trigger-box-left-sign" style="visibility: hidden;"> ＝ </span> <span class="sensors-jssdk-trigger-box-condition">点击 '+(i.nthEle.join(" ")+(i.selfAttr.text?"且包含内容"+i.selfAttr.text:""))+"</span> ":' <span class="sensors-jssdk-trigger-box-left-sign"> ＋ </span> <span class="sensors-jssdk-trigger-box-condition">点击 '+(i.nthEle.join(" ")+(i.selfAttr.text?"且包含内容"+i.selfAttr.text:""))+"</span> ",e+=" ",e+=i.to_del?' <span class="sensors-jssdk-trigger-box-content-revert"> 恢复 </span> ':' <span class="sensors-jssdk-trigger-box-content-delete"> 删除 </span> ',e+=" </li> ";e+=" </ul> </li> "}return e+=" </ul> </div></div>"}var e=t;(function(t){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},s=t?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(s,function(t){return e[t]||t}):""}})();g.gtemplate=g.gtemplate||{},g.gtemplate.trigger_box=e}(),l.template=g.gtemplate;var p=new function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},e=0,s=0;this.create=function(t,e){return s+=1,p(r(t,0,!1),{"class":"jstValue"})};var n=function(e){return e.replace(/[&<>'"]/g,function(e){return t[e]})},i=function(){return s+"_"+e++},r=function(t,e,s){if(null===t)return u(s?e:0);var n=typeof t;switch(n){case"boolean":return c(t,s?e:0);case"number":return d(t,s?e:0);case"string":return l(t,s?e:0);default:return t instanceof Array?a(t,e,s):o(t,e,s)}},o=function(t,e,s){var n=i(),r=Object.keys(t).map(function(s){return h(s,t[s],e+1,!0)}).join(g()),o=[m("{",s?e:0,n),p(r,{id:n}),b("}",e)].join("\n");return p(o,{})},a=function(t,e,s){var n=i(),o=t.map(function(t){return r(t,e+1,!0)}).join(g()),a=[m("[",s?e:0,n),p(o,{id:n}),b("]",e)].join("\n");return a},l=function(t,e){return p(k(f(n(t)),e),{"class":"jstStr"})},d=function(t,e){return p(k(t,e),{"class":"jstNum"})},c=function(t,e){return p(k(t,e),{"class":"jstBool"})},u=function(t){return p(k("null",t),{"class":"jstNull"})},h=function(t,e,s){var i=k(f(n(t))+": ",s),o=p(r(e,s,!1),{});return p(i+o,{"class":"jstProperty"})},f=function(t){return'"'+t+'"'},g=function(){return p(",\n",{"class":"jstComma"})},p=function(t,e){return v("span",e,t)},v=function(t,e,s){return"<"+t+Object.keys(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")+">"+s+"</"+t+">"},m=function(t,e,s){return p(k(t,e),{"class":"jstBracket"})+p("",{"class":"jstFold",onclick:window.sensorsDataAnalytic201505+".JSONTree.toggle('"+s+"')"})};this.toggle=function(t){var e=document.getElementById(t),s=e.parentNode,n=e.previousElementSibling;""===e.className?(e.className="jstHiddenBlock",s.className="jstFolded",n.className="jstExpand"):(e.className="",s.className="",n.className="jstFold")};var b=function(t,e){return p(k(t,e),{})},k=function(t,e){return Array(2*e+1).join(" ")+t}};l.JSONTree=p;var v=function(){function t(t){var e=Array.isArray(t)?{label:t[0],value:t[1]}:"object"==typeof t&&"label"in t&&"value"in t?t:{label:t,value:t};this.label=e.label||e.value,this.value=e.value}function e(t,e,s){for(var n in e){var i=e[n],r=t.input.getAttribute("data-"+n.toLowerCase());"number"==typeof i?t[n]=parseInt(r):i===!1?t[n]=null!==r:i instanceof Function?t[n]=null:t[n]=r,t[n]||0===t[n]||(t[n]=n in s?s[n]:i)}}function s(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function n(t,e){return r.call((e||document).querySelectorAll(t))}var i=function(t,n){var r=this;this.input=s(t),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-autocomplete","list"),n=n||{},e(this,{minChars:2,maxItems:10,autoFirst:!1,data:i.DATA,filter:i.FILTER_CONTAINS,sort:i.SORT_BYLENGTH,item:i.ITEM,replace:i.REPLACE,onClose:function(){},awesomplete_select:function(){}},n),this.index=-1,this.container=s.create("div",{className:"sensors-jssdk-awesomplete",around:t}),this.ul=s.create("ul",{"sensors-jssdk-awes-hidden":"sensors-jssdk-awes-hidden",inside:this.container}),this.status=s.create("span",{className:"sensors-jssdk-visually-hidden",role:"status","aria-live":"assertive","aria-relevant":"additions",inside:this.container}),s.bind(this.input,{focus:this.evaluate.bind(this),input:this.evaluate.bind(this),blur:this.close.bind(this),keydown:function(t){var e=t.keyCode;r.opened&&(13===e&&r.selected?(t.preventDefault(),r.select()):27===e?r.close():(38===e||40===e)&&(t.preventDefault(),r[38===e?"previous":"next"]()))}}),s.bind(this.input.form,{submit:this.close.bind(this)}),s.bind(this.ul,{mousedown:function(t){var e=t.target;if(e!==this){for(;e&&!/li/i.test(e.nodeName);)e=e.parentNode;e&&0===t.button&&(t.preventDefault(),r.select(e,t.target))}}}),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||n.list||[],i.all.push(this)};i.prototype={set list(t){if(Array.isArray(t))this._list=t;else if("string"==typeof t&&t.indexOf(",")>-1)this._list=t.split(/\s*,\s*/);else if(t=s(t),t&&t.children){var e=[];r.apply(t.children).forEach(function(t){if(!t.disabled){var s=t.textContent.trim(),n=t.value||s,i=t.label||s;""!==n&&e.push({label:i,value:n})}}),this._list=e}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return!this.ul.hasAttribute("sensors-jssdk-awes-hidden")},close:function(){this.ul.setAttribute("sensors-jssdk-awes-hidden",""),this.index=-1,s.fire(this.input,"sensors-jssdk-awesomplete-close")},open:function(){this.ul.removeAttribute("sensors-jssdk-awes-hidden"),this.autoFirst&&-1===this.index&&this["goto"](0),s.fire(this.input,"sensors-jssdk-awesomplete-open")},next:function(){var t=this.ul.children.length;this["goto"](this.index<t-1?this.index+1:-1)},previous:function(){var t=this.ul.children.length;this["goto"](this.selected?this.index-1:t-1)},"goto":function(t){var e=this.ul.children;this.selected&&e[this.index].setAttribute("aria-selected","false"),this.index=t,t>-1&&e.length>0&&(e[t].setAttribute("aria-selected","true"),this.status.textContent=e[t].textContent,s.fire(this.input,"sensors-jssdk-awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(t,e){if(t?this.index=s.siblingIndex(t):t=this.ul.children[this.index],t){var n=this.suggestions[this.index];this.awesomplete_select({text:n,origin:e||t});var i=s.fire(this.input,"sensors-jssdk-awesomplete-select",{text:n,origin:e||t});i&&(this.replace(n),this.close(),s.fire(this.input,"sensors-jssdk-awesomplete-select-complete",{text:n}))}},evaluate:function(){var e=this,s=this.input.value;s.length>=this.minChars&&this._list.length>=0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(n){return new t(e.data(n,s))}).filter(function(t){return e.filter(t,s)}).sort(this.sort).slice(0,this.maxItems),this.suggestions.forEach(function(t){e.ul.appendChild(e.item(t,s))}),0===this.ul.children.length?this.close():this.open()):this.close()}},i.all=[],i.FILTER_CONTAINS=function(t,e){return RegExp(s.regExpEscape(e.trim()),"i").test(t)},i.FILTER_STARTSWITH=function(t,e){return RegExp("^"+s.regExpEscape(e.trim()),"i").test(t)},i.SORT_BYLENGTH=function(t,e){return t.length!==e.length?t.length-e.length:e>t?-1:1},i.ITEM=function(t,e){var n=""===e?t:t.replace(RegExp(s.regExpEscape(e.trim()),"gi"),"<mark>$&</mark>");return s.create("li",{innerHTML:n,"aria-selected":"false"})},i.REPLACE=function(t){this.input.value=t.value},i.DATA=function(t){return t},Object.defineProperty(t.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),t.prototype.toString=t.prototype.valueOf=function(){return""+this.label};var r=Array.prototype.slice;return s.create=function(t,e){var n=document.createElement(t);for(var i in e){var r=e[i];if("inside"===i)s(r).appendChild(n);else if("around"===i){var o=s(r);o.parentNode.insertBefore(n,o),n.appendChild(o)}else i in n?n[i]=r:n.setAttribute(i,r)}return n},s.bind=function(t,e){if(t)for(var s in e){var n=e[s];s.split(/\s+/).forEach(function(e){t.addEventListener(e,n)})}},s.fire=function(t,e,s){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0);for(var i in s)n[i]=s[i];return t.dispatchEvent(n)},s.regExpEscape=function(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},s.siblingIndex=function(t){for(var e=0;t=t.previousElementSibling;e++);return e},i.$=s,i.$$=n,i}(),m={};m.Formatting={escape:function(t){return t.replace(/"/g,'\\"').replace(/'/g,"\\'")},capitalize:function(t,e){var s;return null==t&&(t=""),s=function(t){return t.slice(0,1).toUpperCase()+t.slice(1)},e?s(t):t.split(" ").map(s).join(" ")},numberWithCommas:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},+function(t){"use strict";function e(e,n){return this.each(function(){var i=t(this),r=i.data("bs.modal"),o=t.extend({},s.DEFAULTS,i.data(),"object"==typeof e&&e);r||i.data("bs.modal",r=new s(this,o)),"string"==typeof e?r[e](n):o.show&&r.show(n)})}var s=function(e,s){this.options=s,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".sensors-jssdk-modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".sensors-jssdk-modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};s.VERSION="3.3.6",s.TRANSITION_DURATION=300,s.BACKDROP_TRANSITION_DURATION=150,s.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},s.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},s.prototype.show=function(e){var n=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("sensors-jssdk-modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=t.support.transition&&n.$element.hasClass("sensors-jssdk-fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),i&&n.$element[0].offsetWidth,n.$element.addClass("sensors-jssdk-in"),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});i?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(s.TRANSITION_DURATION):n.$element.trigger("focus").trigger(r),n.options.sacallback&&n.options.sacallback()}))},s.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("sensors-jssdk-in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("sensors-jssdk-fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(s.TRANSITION_DURATION):this.hideModal())},s.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},s.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},s.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},s.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("sensors-jssdk-modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},s.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},s.prototype.backdrop=function(e){var n=this,i=this.$element.hasClass("sensors-jssdk-fade")?"sensors-jssdk-fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&i;if(this.$backdrop=t(document.createElement("div")).addClass("sensors-jssdk-modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("sensors-jssdk-in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("sensors-jssdk-in");var o=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("sensors-jssdk-fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION):o()}else e&&e()},s.prototype.handleUpdate=function(){this.adjustDialog()},s.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},s.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},s.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},s.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},s.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},s.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="sensors-jssdk-modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=s,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(s){var n=t(this),i=n.attr("href"),r=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},r.data(),n.data());n.is("a")&&s.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(r,o,this)})}(h),h.fn.gSelectBox=function(){return h(this).each(function(t,e){h(e).css({position:"relative"});var s=h("<label></label>");h(e).prepend(s);var n=h('<i class="sensors_jssdk_gselect_box_arrow">&lt;</i>');n.css({color:"rgb(0, 178, 122)",display:"block",font:"14px Comic Sans MS",position:"absolute",right:"10px",top:"8px",transform:"rotate(270deg)"}),h(e).prepend(n);var i=h(e).find("select");i.addClass("sensors_jssdk_gselect_box_select").css({cursor:"pointer",position:"absolute",opacity:0,width:"100%",height:"100%",left:0,top:0}).off("change").on("change",function(){s.text(h(this).find("option:checked").text())}),s.text(i.find("option:checked").text())})},function(){h.fn.gdrag=function(t){return t=h.extend({bar:null,sty:"draggable"},t),h(this).each(function(){h(this).on("mousedown",function(e){function s(e){i.addClass(t.sty).offset({top:l+e.pageY-o,left:a+e.pageX-r}),t.keepBottom||i.css({bottom:"auto"}),e.stopPropagation()}function n(e){i.removeClass(t.sty),h(document).off("mousemove",s).off("mouseup",n),e.stopPropagation()}if("BUTTON"===e.target.tagName)return!1;var i=t.bar||h(this),r=e.pageX,o=e.pageY,a=i.offset().left,l=i.offset().top;e.preventDefault(),h(document).on("mousemove",s).on("mouseup",n)})}),h(this)}}(),t.prototype={add:function(t){this.removeAll(),this.addMore(t)},remove:function(t){t.removeClass(this.highlightClass)},removeAll:function(){for(var t=0;t<this.state.length;t++)this.state[t]&&this.state[t].removeClass(this.highlightClass);this.state=[]},removeHTML:function(){h("."+this.highlightClass).removeClass(this.highlightClass),this.state=[]},addMore:function(t){t&&t instanceof h&&(t.addClass(this.highlightClass),this.state.push(t))}};var b=new t("sensors-outline-highlight-frame"),k=new t("sensors-outline-highlight-frame-deployed");e.prototype={getSelfAttr:function(t){var e,s={};t.prop("tagName").toLowerCase();return e=t.text(),e&&(s.text=e),s},toSelector:function(t){var e,s,n,i,r,o,a,d,c=function(t){return/^[\w-]+$/g.test(t)};if(a=t.prop("tagName").toLowerCase(),i=t.attr("id"),d=t.prop("className"),null!=d){d=" "+t.prop("className")+" ";for(var u in f.IGNORE.iclass)d=d.replace(" "+u+" ","");d=d.replace(/^\s+/,"").replace(/\s+$/,""),e=""===d?[]:d.split(" ")}else e=[];o=a,!i||l.para.vtrack_ignore.ignore_id&&l.para.vtrack_ignore.ignore_id(i)||(o+="#"+i),r=function(t){return t.length?""+o+"."+t.join("."):o};try{n=r(e),h(n)}catch(g){s=g,e=e.filter(c),n=r(e)}return n},toAllSelector:function(t,e){e=h(e?e:document);var s,n,i,r,o;for(o=this.toSelector(t,e),s=t.parent(),r=e.find(o).length;"BODY"!==s.prop("tagName")&&1!==r;)i=""+this.toSelector(s)+" "+o,n=e.find(i).length,r>n&&(o=i,r=n),s=s.parent();var a=o,l=this.getSelfAttr(t);return{nthEle:a,selfAttr:l}}},s.rule={name:function(t){var e=/^((?!^distinct_id$|^original_id$|^time$|^properties$|^id$|^first_id$|^second_id$|^users$|^events$|^event$|^user_id$|^date$|^datetime$)[a-zA-Z_$][a-zA-Z\d_$]{0,99})$/i;return e.test(t)?!0:"英文事件名只支持英文、数字和下划线，且不能是预置名字。"},url:function(t){return""!==t?!0:"url不能为空"},selfText:function(t){return""!==t?!0:"包含内容不能为空"}},s.prototype={init:function(t){this.target=t.target,this.selector=t.selector;var e=this.target;if("BODY"===e.prop("tagName")||e.attr(this.ignore.tag)===this.ignore.iself)return!1;for(e=e.parent();"BODY"!==e.prop("tagName");){if(e.attr(this.ignore.tag)===this.ignore.iall)return!1;e=e.parent()}b.add(this.target),this.show()},getEleData:function(){return this.dataDefine={name:"",nthEle:this.selector.nthEle.split(" "),selfText:this.selector.selfAttr.text},this.dataDefine},checkUrlMethodShow:function(){var t=location.href.replace(/\?$/,"").replace(/#$/,""),e="part";""===location.search&&""===location.hash&&(e="fixed"),this.eleOut.find('[data-name="sensorsdata-vtrack-url-radio"]').val(e);var s=this.eleOut.find('[data-name="url"]');s.val(t),"fixed"===e?s.prop("disabled",!0):"part"===e&&(s.prop("disabled",!1),t=t.replace(/\?.+$/,"").replace(/#.+$/,""),s.val(t));try{s.get(0).selectionStart=s.get(0).value.length}catch(n){}},show:function(){var t=this,e=this.getEleData();this.eleOut.html(this.tpl(e)),this.checkUrlMethodShow(),this.eleOut.find(".sensors-jssdk-gselectbox-out").gSelectBox(),this.eleOut.modal({sacallback:function(){setTimeout(function(){var e=t.eleOut.find('input[data-name="name"]'),s=t.eleOut.find('input[data-name="cname"]');d.ajax({url:c.vtrackEventsUrl,cors:!0,header:{cors:"true"},success:function(t){if(t=t||[],0===t.length)return!1;new v(e[0],{filter:v.FILTER_CONTAINS,maxItems:10,list:t,minChars:0,data:function(t,e){return{label:t.name+" ("+t.cname+")",value:t.name,cname:t.cname}},awesomplete_select:function(e,n){var i=e.text.value;if(""!==i){var r=h.grep(t,function(t){return t.name===i});0!==r.length?s.val(r[0].cname):s.val("")}}});e.focus().on("input",function(){var n=e.val();if(""!==n){var i=h.grep(t,function(t){return t.name===n});0!==i.length?s.val(i[0].cname):s.val("")}})},error:function(){}})},0)}}),this.events_()},events_:function(){var t=this;this.eleOut.find(".sensors-jssdk-popover-button").off().on("click",function(){t.defineEvent()}),this.eleOut.find('[data-name="sensorsdata-vtrack-url-radio"]').on("change",function(){t.eleOut.find('[data-name="url"]').prop("disabled",!1)});var e=this.eleOut.find('[data-name="selfText"]'),s=this.eleOut.find('[data-name="selfTextCheck"]');s.on("change",function(){"yes"===h(this).val()?e.show():e.hide()}),"yes"===s.val()?e.show():e.hide()},close:function(){this.eleOut.modal("hide")},getSelfSelector:function(){var t=this.eleOut,e={};return"yes"===t.find('[data-name="selfTextCheck"] option:checked').val()&&(e.text=t.find('[data-name="selfText"]').val()),e},getDefineData:function(){var t=this.eleOut;return{name:t.find('[data-name="name"]').val(),cname:t.find('[data-name="cname"]').val(),url:t.find('[data-name="url"]').val(),urlMode:t.find('[data-name="sensorsdata-vtrack-url-radio"] option:checked').val(),selfAttr:this.getSelfSelector()}},checkDefineData:function(t){var e=null;for(var s in t)if(this.verifyRule[s]&&(e=this.verifyRule[s](t[s]),e!==!0))return e;return!0},closePop:function(){b.removeAll(),u.floatlayer.close()},defineEvent:function(){var t=this,e=this.getDefineData(),s={};s.name=e.name,""!==e.cname&&(s.cname=e.cname),s.triggers=[],s.triggers[0]={},s.triggers[0].lib="Web",s.triggers[0].url=JSON.stringify({url:e.url,mode:e.urlMode,origin:location.href}),s.triggers[0].config={},s.triggers[0].snapshot="",s.triggers[0].config.eventName=e.name,s.triggers[0].config.nthEle=this.dataDefine.nthEle,s.triggers[0].config.selfAttr=e.selfAttr,s.triggers[0].config=JSON.stringify(s.triggers[0].config);var n={name:e.name,url:e.url},i=this.checkDefineData(n);return"string"!=typeof i&&i?void d.ajax({url:c.defineUrl,type:"POST",cors:!0,header:{cors:"true"},contentType:"application/json",data:JSON.stringify(s),success:function(e){t.closePop(),u.triggerBox.show()},error:function(e,s){409===s&&t.showError("已经有了相同的埋点条件")}}):(this.showError(i),!1)},showError:function(t){var e=this.eleOut.find(".sensors-jssdk-popover-head-error-notice");e.text(t).show(),setTimeout(function(){e.hide()},6e3)}},u.floatlayer=new s,n.prototype={init:function(){var t=this.tpl(this.data);this.bar=h(t),h(document.body).append(this.bar),this.btnDefine=this.bar.find('[data-sensors-action="define_mode"]'),this.btnTest=this.bar.find('[data-sensors-action="test_mode"]'),this.btnQuit=this.bar.find('[data-sensors-action="exit_login"]'),this.btnDefineUrl=this.bar.find('[data-sensors-action="define_url"]'),this.btnTrigger=this.bar.find('[data-sensors-action="trigger_box"]'),this.btnMini=this.bar.find('[data-sensors-action="mini-right"]'),this.btnMini2=h('<div sensors_ignore_tag="all" class="sensors-jssdk-head-out" style="width: auto;display:none;"> <div class="sensors-jssdk-head-in"><div class="sensors-jssdk-head-in-right" style="width: auto;"><button data-sensors-action="mini-right-2" style="background: rgb(0, 153, 119) none repeat scroll 0% 0%; font-weight: bold;" class="sensors-jssdk-btn"> &lt; </button></div></div></div>'),h(document.body).append(this.btnMini2),this.events_()},quit:function(){d.ajax({url:c.tokenUrl,type:"delete",cors:!0,header:{cors:"true"},success:function(){c.removeLifeCookie(),location.reload()},error:function(){}})},defineMode:function(){return this.btnDefine.hasClass("sensors-jssdk-btn-success")?!1:(c.setLifeCookieNavStatus("defineMode"),void location.reload())},testMode:function(){return this.btnTest.hasClass("sensors-jssdk-btn-success")?!1:(c.setLifeCookieNavStatus("testMode"),void location.reload())},events_:function(){var t=this;t.bar.gdrag({except:"button"}),this.btnDefine.on("click",function(){t.defineMode()}),this.btnTest.on("click",function(){t.testMode()}),this.btnQuit.on("click",function(){
t.quit()}),this.btnDefineUrl.on("click",function(){u.triggerBox.hide(),u.defineUrlBox.toggle(t.btnDefineUrl)}),this.btnTrigger.on("click",function(){u.defineUrlBox.hide(),u.triggerBox.toggle(t.btnTrigger)}),this.btnMini.on("click",function(){t.btnMini2.show(),t.bar.hide()}),this.btnMini2.on("click",function(){t.btnMini2.hide(),t.bar.show()})}},i.prototype={addToStore:function(t){var e=[];this.dataStore.unshift(t),e=this.dataStore.length>this.maxStoreTime?this.dataStore.slice(0,this.maxStoreTime):this.dataStore,this.save(e)},save:function(t){d.localStorage.set(c.visualStorageName,JSON.stringify(t))},get:function(){var t="";return null!==localStorage.getItem(c.visualStorageName)&&(t=d.localStorage.parse(c.visualStorageName)||""),t},init:function(){l.init();var t=this;l.customEv.on("debugInfo",function(e,s){t.showTrackInfo(s,"vtrack")}),u.headerBar.btnDefineUrl.hide(),u.headerBar.btnTrigger.hide()},createTestBox:function(){var t=l.template.testmode_box({});t=h(t);var e=this.get();h.isArray(e)&&(this.dataStore=e.slice(0,10)),h(document.body).append(t),this.eleOutput=t.find("ul"),t.find("header").gdrag({bar:t,keepBottom:!0}),this.eleOutput.append(this.dataStore.join(""))},parseData:function(t){this.dataUndeployed=t.binding,this.requireData=c.checkUrl(this.dataUndeployed),this.listenEvents()},listenEvents:function(){for(var t=this.requireData,e=this,s=null,n=0;n<t.length;n++)s=c.getEleExcept(t[n]),s&&s.on("click",function(t){return function(){e.showOutput(t)}}(t[n]))},showOutput:function(t){function e(t){return t=String(t),1===t.length?"0"+t:t}var s="<li>";s+=null!=t.eventName?'<span style="color:#ff4e00;">'+t.eventName+"</span><span>":"未定义事件名",s+=t.deployed?"（已部署）":"（未部署）";var n=new Date;s+=e(n.getHours())+":"+e(n.getMinutes())+":"+e(n.getSeconds())+"</span>",this.storeStr_=s,l.sdkMain.doVTrackAction(t)},showTrackInfo:function(t,e){var s=this.storeStr_+"<br/>";s+=p.create(t),s+="</li>",this.addToStore(s),s=h(s).hide().css({background:"#cfe5d8"}),this.eleOutput.prepend(s),s.slideDown(),setTimeout(function(){s=s.css({background:"none"})},1500)}},r.prototype={switchNav:function(){var t=c.getLifeCookieNavStatus()||"defineMode";u.headerBar=new n({data:{navStatus:t}}),"defineMode"===t?this.showDefineMode():"testMode"===t&&this.showTestMode()},showTestMode:function(){l.vtrack_mode="testMode",h(document).on("click",function(t){var e=h(t.target);"A"===e.prop("tagName")&&t.preventDefault()}),u.testMode=new i,d.ajax({url:c.getAllVtrackUrl,cors:!0,header:{cors:"true"},success:function(t){u.testMode.parseData(t)},error:function(){}}),u.testMode.createTestBox()},iframeEv:function(t){function e(t){if(t&&t instanceof jQuery){var e=t.attr("src");if(0===e.indexOf("http")){var s=location.protocol+"//"+location.hostname;return 0===e.indexOf(s)?!0:!1}return!0}return!1}function s(t,e){return t.nthEle=e+" "+t.nthEle,t}for(var n=h("iframe"),i=0;i<n.length;i++)!function(){var r='iframe[src="'+n.eq(i).attr("src")+'"]';h(r).length>1&&(r=r+":eq("+i+")");var o=null;try{e(h(r))&&(o=h(r).contents())}catch(a){}return o?(o.on("click",function(e){var n=h(e.target);if("BODY"===n.prop("tagName")||"HTML"===n.prop("tagName")||n.attr(f.IGNORE.tag)===f.IGNORE.iself)return!1;var i=t.toAllSelector(h(e.target),o);u.floatlayer.init({target:h(e.target),selector:s(i,r)})}),void o.on("click","a",function(e){if(0===h(this).parents("["+f.IGNORE.tag+'="'+f.IGNORE.iall+'"]').length){var n=t.toAllSelector(h(e.target),o);return u.floatlayer.init({target:h(e.target),selector:s(n,r)}),e.preventDefault(),!1}})):!1}(i)},showDefineMode:function(){l.vtrack_mode="defineMode";var t=new e;h(document).on("click","["+f.IGNORE.tag+'="'+f.IGNORE.iall+'"]',function(t){t.stopPropagation()}),h(document).on("click",function(e){var s=h(e.target);if("BODY"===s.prop("tagName")||"HTML"===s.prop("tagName")||s.attr(f.IGNORE.tag)===f.IGNORE.iself)return!1;var n=t.toAllSelector(h(e.target));u.floatlayer.init({target:h(e.target),selector:n})}),h(document).on("click","a",function(e){if(0===h(this).parents("["+f.IGNORE.tag+'="'+f.IGNORE.iall+'"]').length){var s=t.toAllSelector(h(e.target));return u.floatlayer.init({target:h(e.target),selector:s}),e.preventDefault(),!1}}),this.iframeEv(t)}},u.main=new r,o.prototype={init:function(){this.eleOut_=h('<div sensors_ignore_tag="all" class="sensors-jssdk-trigger-box-outlet"></div>'),h(document.body).append(this.eleOut_)},toggle:function(t){this.eleTitleBtn=t||u.headerBar.btnDefineUrl,this.isShow?this.hide():this.show()},show:function(){this.eleTitleBtn=this.eleTitleBtn||u.headerBar.btnDefineUrl;var t=this;this.eleOut_.hide(),this.eleTitleBtn.addClass("sensors-jssdk-title-select"),this.refreshList(function(){}),t.eleOut_.css({right:-320,display:"block"}).animate({right:0},500),t.isShow=!0},hide:function(){if(!this.isShow)return!1;this.eleTitleBtn.removeClass("sensors-jssdk-title-select");var t=this;this.eleOut_.animate({right:-320},500,function(){t.eleOut_.hide()}),this.isShow=!1},ajaxTriggerBox:function(){return new Promise(function(t,e){d.ajax({url:c.getAllVtrackUrl,cors:!0,header:{cors:"true"},success:function(e){e=e||{},t(e)},error:function(){}})})},getOriginUrl:function(t){function e(t){return d.urlParse(t)._values.Origin}var s=null,n={},i=null;for(var r in t)d.isJSONString(r)&&(s=JSON.parse(r),i=e(s.origin),n[i]=n[i]||{},n[i][s.origin.replace(i,"")]=s.origin);return n},refreshList:function(t){var e=this;this.dataByDomain={},this.ajaxTriggerBox().then(function(s){var n=null;s&&s.binding&&(n=e.getOriginUrl(s.binding)),e.eleOut_.html(e.templateOut_(n)),t&&t()})}},u.defineUrlBox=new o,a.prototype={init:function(){this.eleOut_=h('<div sensors_ignore_tag="all" class="sensors-jssdk-trigger-box-outlet"></div>'),h(document.body).append(this.eleOut_),this.events_(),this.refreshAllDeployedSelect()},toggle:function(t){this.eleTitleBtn=t||u.headerBar.btnTrigger,this.isShow?this.hide():this.show()},show:function(){var t=this;this.eleTitleBtn=this.eleTitleBtn||u.headerBar.btnTrigger,this.eleOut_.hide(),this.eleTitleBtn.addClass("sensors-jssdk-title-select"),this.refreshList(function(){}),t.eleOut_.css({right:-320,display:"block"}).animate({right:0},500),t.isShow=!0},hide:function(){if(!this.isShow)return!1;this.eleTitleBtn.removeClass("sensors-jssdk-title-select");var t=this;this.eleOut_.animate({right:-320},500,function(){t.eleOut_.hide()}),this.isShow=!1},hasChange:function(){this.dataTitleChange===!1&&0!==this.dataToDelete.length&&(this.dataTitleChange=!0);var t=this.eleOut_.find(".sensors-jssdk-trigger-box-header-title-change");this.dataTitleChange?(t.css({color:"#f55"}).text("当前页面有未部署的改动"),this.eleOut_.find(".sensors-jssdk-trigger-box-deploy-btn").show()):(t.css({color:"#555"}).text("当前页面已部署的触发条件"),this.eleOut_.find(".sensors-jssdk-trigger-box-deploy-btn").hide())},events_:function(){var t=this;this.eleOut_.on("click",".sensors-jssdk-trigger-box-deploy-btn",function(){t.deployData()}),this.eleOut_.on("click",".sensors-jssdk-trigger-box-content-delete",function(){var e=h(this).closest("li"),s=e.attr("data-trigger");"true"===e.attr("data-deploy")?(t.dataToDelete.push(s),t.refreshList()):t.deleteTrigger([s],function(){t.refreshList()})}),this.eleOut_.on("click",".sensors-jssdk-trigger-box-content-revert",function(){var e=h(this).closest("li"),s=e.attr("data-trigger");t.dataToDelete.splice(h.inArray(s,t.dataToDelete),1),t.refreshList()}),this.eleOut_.on("mouseenter",".sensors-jssdk-trigger-box-content-list li",function(){t.hoverSelectedTrigger(!0,h(this).attr("data-trigger"))}).on("mouseleave",".sensors-jssdk-trigger-box-content-list li",function(){t.hoverSelectedTrigger(!1,h(this).attr("data-trigger"))})},ajaxTriggerBox:function(){return new Promise(function(t,e){d.ajax({url:c.getAllVtrackUrl,cors:!0,header:{cors:"true"},success:function(e){e=e||{},t(e)},error:function(){}})})},ajaxAllEvents:function(){return new Promise(function(t,e){d.ajax({url:c.vtrackEventsUrl,cors:!0,header:{cors:"true"},success:function(e){e=e||{},t(e)},error:function(){}})})},refreshList:function(t){var e=this;this.dataTitleChange=!1,this.dataByTriggerId={},Promise.all([this.ajaxTriggerBox(),this.ajaxAllEvents()]).then(function(s){var n=c.checkUrl(s[0].binding),i=s[1];e.refreshAllDeployedSelect(n);var r={},o={};h.each(i,function(t,e){o[e.name]=e.cname}),h.each(n,function(t,s){-1!==h.inArray(String(s.trigger_id),e.dataToDelete)&&(s.to_del=!0),e.dataTitleChange===!1&&s.deployed===!1&&(e.dataTitleChange=!0),e.dataByTriggerId[s.trigger_id]=s,r[s.eventName]?r[s.eventName].triggers.push(s):(r[s.eventName]={},r[s.eventName].triggers=[s],r[s.eventName].cname=o[s.eventName]||"",r[s.eventName].name=s.eventName)}),e.eleOut_.html(e.templateOut_(r)),e.hasChange(),t&&t()})},deleteTrigger:function(t,e){return h.isArray(t)?void d.ajax({url:this.vtrackDeleteUrl,cors:!0,type:"DELETE",header:{cors:"true"},contentType:"application/json",data:JSON.stringify(t),success:function(){e&&e()}}):!1},deployData:function(){function t(){d.ajax({cors:!0,header:{cors:"true"},url:e.vtrackDeployUrl,type:"PUT",success:function(){e.dataToDelete=[],e.dataTitleChange=!1,e.refreshList()}})}var e=this;this.dataTitleChange&&(0!==this.dataToDelete.length?this.deleteTrigger(this.dataToDelete,t):t())},refreshAllDeployedSelect:function(t){function e(t){h.each(t,function(t,e){e.deployed===!0&&k.addMore(c.getEleExcept(e))})}k.removeAll(),t?e(t):this.ajaxTriggerBox().then(function(t){e(c.checkUrl(t.binding))})},hoverSelectedTrigger:function(t,e){var s=this.dataByTriggerId[e],n=c.getEleExcept(s);s&&n&&n instanceof h&&(t?n.addClass("sensors-outline-highlight-frame-select"):n.removeClass("sensors-outline-highlight-frame-select"))}},u.triggerBox=new a}();