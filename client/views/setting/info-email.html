<div ng-controller="SettingInfoEmailController">
    <div ng-if="settingInfo.email" class="pd-tp-20 pd-bt-30 setting_info_zero__list-title">
        <span class="line">{{lang.text('tigerWitID.settings.mailboxSettings')}}</span>
        <span>{{lang.text('tigerWitID.settings.alreadyBoundEmail')}}</span>
        <span class="font-info">{{ settingInfo.email }}</span>
    </div>
    <div ng-if="!settingInfo.email" class="pd-tp-20 pd-bt-10 setting_info_zero__list-title">
        <span class="line">{{lang.text('tigerWitID.settings.mailboxSettings')}}</span>
        <span>{{lang.text('tigerWitID.settings.noBindEmail')}}</span>
    </div>
    <div ng-show="step === 1" class="setting_info_zero__list-input">
        <div class="row">
            <form name="oldEmailForm" novalidate autocomplete="off" class="display-flex">
                <div class="col-xs-3 text-center">
                    <div class="relative">
                        <div class="captcha_btn"  
                                ng-disabled="!clickable.oldCode" 
                                ng-click="getEmailCode('old')">
                            {{ countDownMsg.oldMsg }}
                        </div>
                    </div>
                </div>

                <div class="col-xs-3">
                    <div class="form-control-wrapper">
                        <input class="form-control"
                                name="oldCode"
                                type="text"
                                placeholder="{{lang.text('tigerWitID.settings.oldEmailVerificationCode')}}"
                                required
                                ng-class="{'form-control-error': frontErr.oldCode.show && oldEmailForm.oldCode.$invalid}"
                                ng-model="emailInfo.oldCode"
                                ng-blur="showFrontErr('oldCode')"
                                ng-focus="hideFrontErr('oldCode')">

                        <div ng-show="frontErr.oldCode.show">
                            <p class="alert alert-arrow_tp_lf" ng-show="oldEmailForm.oldCode.$error.required">
                                {{lang.text('tigerWitID.settings.enterVerificationCode')}}
                            </p>
                        </div>
                    </div>
                </div>

                <div class="flex1 justify-flex-end">
                    <button class="tw-btn tw-btn-md tw-btn-capsule-gradient" type="submit" ng-if="clickable.oldSubmit" ng-click="checkEmailCode()">
                        {{lang.text('tigerWitID.submit')}}
                    </button>

                    <button class="tw-btn tw-btn-md tw-btn-capsule-gradient" ng-if="!clickable.oldSubmit">
                        <i class="loading_spinner fa fa-spinner"></i>
                        {{lang.text('tigerWitID.submitting')}}
                    </button>
                </div>
            </form>
        </div>
    </div>
    <div ng-show="step === 2" class="setting_info_zero__list-input">
        <div class="row">
            <form name="newEmailForm" novalidate class="display-flex">
                <div class="col-xs-3">
                    <div class="form-control-wrapper">
                        <input class="form-control"
                                name="newEmail"
                                type="text"
                                placeholder="{{lang.text('tigerWitID.settings.newEmail')}}"
                                required
                                ng-class="{'form-control-error': frontErr.newEmail.show && newEmailForm.newEmail.$invalid}"
                                ng-model="emailInfo.newEmail"
                                ng-pattern="{{ emailInfo.emailPattern }}"
                                ng-blur="showFrontErr('newEmail')"
                                ng-focus="hideFrontErr('newEmail')">

                        <div ng-show="frontErr.newEmail.show">
                            <p class="alert alert-arrow_tp_lf" ng-show="newEmailForm.newEmail.$error.required">
                                {{lang.text('tigerWitID.settings.enterNewEmail')}}
                            </p>
                            <p class="alert alert-arrow_tp_lf" ng-show="newEmailForm.newEmail.$error.pattern">
                                {{lang.text('tigerWitID.settings.emailFormatError')}}
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-xs-3 text-center">
                    <div class="relative">
                        <div class="captcha_btn"  
                                ng-disabled="!clickable.newCode" 
                                ng-click="getEmailCode('new')">
                            {{ countDownMsg.newMsg }}
                        </div>
                    </div>
                </div>

                <div class="col-xs-3">
                    <div class="form-control-wrapper">
                        <input class="form-control"
                                name="newCode"
                                type="text"
                                placeholder="{{lang.text('tigerWitID.settings.newEmailVerCode')}}"
                                required
                                ng-class="{'form-control-error': frontErr.newCode.show && newEmailForm.newCode.$invalid}"
                                ng-model="emailInfo.newCode"
                                ng-blur="showFrontErr('newCode')"
                                ng-focus="hideFrontErr('newCode')">

                        <div ng-show="frontErr.newCode.show">
                            <p class="alert alert-arrow_tp_lf" ng-show="newEmailForm.newCode.$error.required">
                                {{lang.text('tigerWitID.settings.enterVerificationCode')}}
                            </p>
                        </div>
                    </div>
                </div>

                <div class="flex1 justify-flex-end">
                    <button class="tw-btn tw-btn-md tw-btn-capsule-gradient" type="submit" ng-if="clickable.newSubmit" ng-click="setBindEmail()">
                        {{lang.text('tigerWitID.submit')}}
                    </button>

                    <button class="tw-btn tw-btn-md tw-btn-capsule-gradient" ng-if="!clickable.newSubmit">
                        <i class="loading_spinner fa fa-spinner"></i>
                        {{lang.text('tigerWitID.submitting')}}
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>