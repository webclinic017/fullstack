<div class="authen_content ctn center">
    <div class="authen_title">
        <h2>上传身份证明</h2>
        <p class="authen_content__tip">因监管要求，请您提供相关信息。请确认是您本人，审核通过后不可修改。</p>
    </div>
    <div class="kyc mg-tp-40">
        <form name="realnameForm" novalidate autocomplete="off">
            <div class="row">
                <div class="col-xs-2">
                    <label>真实姓名</label>
                </div>        
                <div class="col-xs-6">
                    <div class="form-control-wrapper">
                        <input class="form-control"
                                name="realname"
                                type="text"
                                placeholder="请输入真实姓名"
                                required
                                ng-class="{'form-control-error': frontErr.realname.show && realnameForm.realname.$invalid}"
                                ng-model="realnameInfo.realname"
                                ng-pattern="frontErr.realname.reg"
                                ng-blur="showErr('realname')"
                                ng-focus="hideErr('realname')">
        
                        <div ng-show="frontErr.realname.show">
                            <p class="alert-arrow_tp_lf" ng-show="realnameForm.realname.$error.required">
                                请输入真实姓名
                            </p>
                            <p class="alert-arrow_tp_lf" ng-show="realnameForm.realname.$error.pattern">
                                {{ frontErr.realname.tip }}
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-2">
                    <label>证件类型</label>
                </div>        
                <div class="col-xs-6">
                    <div class="form-control-wrapper">
                        <div class="select">
                            <input class="select__input"
                                name="id_type"
                                type="text"
                                placeholder="请选择您的证件类型"
                                required
                                ng-model="realnameInfo.id_type.key"
                                ng-class="{'form-control-error': frontErr.id_type.show && realnameForm.id_type.$invalid}"
                                ng-blur="showErr('id_type')"
                                ng-focus="hideErr('id_type')">
                            
                            <i class="select__icon fa fa-angle-down"></i>

                            <ul class="select__dropdown" twform-select data-bind-model="realnameInfo.id_type">
                                <li ng-repeat="id_type in idType" ng-class="{'selected': id_type.value === realnameInfo.id_type.value}" ng-if="(personal.region.world_code === 'CN' && id_type.isCN) || (personal.region.world_code !== 'CN' && id_type.isGlobal)">
                                    <span data-value="{{id_type.value}}">{{ id_type.key }}</span>
                                </li>
                            </ul>
                        </div>
                    
                        <div ng-show="frontErr.id_type.show">
                            <p class="alert alert-arrow_tp_lf" ng-show="realnameForm.id_type.$error.required">
                                请选择您的证件类型
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-xs-2">
                    <label>证件号码</label>
                </div>        
                <div class="col-xs-6">
                    <div class="form-control-wrapper">
                        <input class="form-control"
                            ng-if="realnameInfo.id_type.value == 0"
                            name="id_num"
                            type="text"
                            placeholder="请输入证件号码"
                            required
                            ng-class="{'form-control-error': frontErr.id_num.show && realnameForm.id_num.$invalid}"
                            ng-model="realnameInfo.id_num"
                            ng-pattern="frontErr.id_num.reg"
                            ng-blur="[showErr('id_num'),checkExsit(4), checkBirthday()]"
                            ng-focus="hideErr('id_num')">

                        <!-- 港澳台移除 ng-parttern -->
                        <input class="form-control"
                            ng-if="realnameInfo.id_type.value != 0"
                            name="id_num"
                            type="text"
                            placeholder="请输入证件号码"
                            required
                            ng-class="{'form-control-error': frontErr.id_num.show && realnameForm.id_num.$invalid}"
                            ng-model="realnameInfo.id_num"
                            ng-blur="[showErr('id_num'),checkExsit(4)]"
                            ng-focus="hideErr('id_num')">
        
                        <div ng-show="frontErr.id_num.show">
                            <p class="alert-arrow_tp_lf" ng-show="realnameForm.id_num.$error.required">
                                请输入证件号码
                            </p>
                            <p class="alert-arrow_tp_lf" ng-show="realnameForm.id_num.$error.pattern">
                                {{ frontErr.id_num.tip }}
                            </p>
                        </div>
        
                        <div ng-show="exsit.id_num.show">
                            <p class="alert-arrow_tp_lf">
                                证件号码已存在
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-2">
                    <lable class="form-control-title">性别</lable>
                </div>
                <div class="col-xs-6">
                    <div class="form-control-wrapper">
                        <div class="select">
                            <input class="select__input"
                                name="gender"
                                type="text"
                                placeholder="性别"
                                required
                                ng-model="realnameInfo.gender.key"
                                ng-class="{'form-control-error': frontErr.gender.show && realnameForm.gender.$invalid}"
                                ng-blur="showErr('gender')"
                                ng-focus="hideErr('gender')">
                            
                            <i class="select__icon fa fa-angle-down"></i>

                            <ul class="select__dropdown" twform-select data-bind-model="realnameInfo.gender">
                                
                                <li ng-repeat="gender in genders" ng-class="{'selected': gender.value === realnameInfo.gender.value}">
                                    <span data-value="{{gender.value}}">{{ gender.key }}</span>
                                </li>
                            </ul>
                        </div>
                        
                        <div ng-show="frontErr.gender.show">
                            <p class="alert alert-arrow_tp_lf" ng-show="realnameForm.gender.$error.required">
                                请输入性别
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-2">
                    <lable class="form-control-title">生日</lable>
                </div>
                <div class="col-xs-6">
                    <div class="form-control-wrapper">
                        <input class="form-control"
                            name="birthday"
                            tw-date-picker
                            placeholder="生日"
                            data-type="day"
                            required
                            ng-model="realnameInfo.birthday"
                            data-bind-model="realnameInfo.birthday"
                            data-formatter="yyyymmdd"
                            ng-class="{'form-control-error': frontErr.birthday.show && realnameForm.birthday.$invalid}"
                            ng-blur="showErr('birthday')"
                            ng-focus="hideErr('birthday')"
                        >
                        <div ng-show="frontErr.birthday.show">
                            <p class="alert alert-arrow_tp_lf" ng-show="realnameForm.birthday.$error.required">
                                请输入您的生日
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        <div class="row mg-tp-30">
            <div class="col-xs-6">
                <div class="upload_id_card" tw-upload-id-card>
                    <i class="upload_id_card__icon fa fa-camera"></i>
                    <h3 class="upload_id_card__title">
                        {{(realnameInfo.id_type.value == '0' || realnameInfo.id_type.value == '5') ? '点击上传证件正面' : '点击上传证件'}}
                    </h3>
    
                    <input class="upload_id_card__input" ng-click="hideErr('idFront')" name="file" type="file" accept="image/jpeg,image/png" data-face="front">
                </div>
    
                <div class="upload_id_card-tip">
                    <p class="alert alert-arrow_tp_lf" ng-if="verification.id.frontStatus === 0 && frontErr.idFront.show">
                        请提交证件正面
                    </p>
                    <p class="alert alert-arrow_tp_lf" ng-if="verification.id.frontStatus === 1">
                        正在上传......
                    </p>
                    <p class="alert alert-arrow_tp_lf" ng-if="verification.id.frontStatus === 2">
                        上传成功
                    </p>
                    <p class="alert alert-arrow_tp_lf" ng-if="verification.id.frontStatus === 3">
                        提交失败！请提交小于 2MB 的图片
                    </p>
                </div>
            </div>
    
            <div class="col-xs-6" ng-if="realnameInfo.id_type.value == '0' || realnameInfo.id_type.value == '5'">
                <div class="upload_id_card" tw-upload-id-card>
                    <i class="upload_id_card__icon fa fa-camera"></i>
                    <h2 class="upload_id_card__title">
                        点击上传证件反面
                    </h2>
                    <input class="upload_id_card__input" ng-click="hideErr('idBack')" name="file" type="file" accept="image/jpeg,image/png" data-face="back">
                </div>
    
                <div class="upload_id_card-tip">
                    <p class="alert alert-arrow_tp_lf" ng-if="verification.id.backStatus === 0 && frontErr.idBack.show">
                        请提交证件背面
                    </p>
                    <p class="alert alert-arrow_tp_lf" ng-if="verification.id.backStatus === 1">
                        正在上传......
                    </p>
                    <p class="alert alert-arrow_tp_lf" ng-if="verification.id.backStatus === 2">
                        上传成功
                    </p>
                    <p class="alert alert-arrow_tp_lf" ng-if="verification.id.backStatus === 3">
                        提交失败！请提交小于 2MB 的图片
                    </p>
                </div>
            </div>
        </div>
    
        <p class="text-left mg-tp-15 font-dark">
            目前只支持2MB的PNG、JPG格式
        </p>
    
        <div class="text-center mg-tp-50">
    
            <div ng-show="backErr.system.show">
                <p class="alert-system" ng-show="backErr.system.status === 3">
                    {{ backErr.system.error_msg }}
                </p>
                <p class="alert-system" ng-show="backErr.system.status === 1">
                    文件上传中,请耐心等待
                    <!--信息提交成功-->
                </p>
                <p class="alert-system" ng-show="backErr.system.status === 2">
                    系统繁忙
                </p>
            </div>

            <div class="btn_wrapper text-left">
                <button class="btn btn-sm btn-primary-gradient" ng-if="clickable" ng-click="submitForm()">
                    下一步
                </button>

                <a class="btn btn-sm btn-primary-gradient" ng-if="!clickable">
                    <i class="loading_spinner fa fa-spinner"></i>
                    提交中...
                </a>

                <a ng-if="dredgingType == 'live'" ui-sref="space.center.index" class="btn btn-sm btn-primary-gradient mg-lf-20">
                    跳过
                </a>
            </div>    
        </div>
    </div>
</div>

<!-- 认证审核中 -->
<div class="mg-tp-30" ng-if="verification.status === 2">
    <p>您上传的身份证正在审核中，审核通过后，我们将通过短信或邮件的方式通知您，请注意查收</p>
    <p class="font-danger">注意：审核期间并不影响您的正常交易</p>
</div>

<!-- 已认证 -->
<div class="mg-tp-30" ng-if="verification.status === 3">
    尊敬的
    <span class="font-danger">{{verification.realname || '**'}}</span> 您好，您上传的身份信息已经通过审核，请放心交易
    <!--<span class="font-danger">{{verification.id.number || '**'}}</span>-->
</div>
</div>