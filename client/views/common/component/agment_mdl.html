<div class="agreement_modal_for_layer__box">
    <!-- web新注册 -->
    <div class="web_agreement_modal_for_layer web_new_register">
        <div class="agment_mdl_con web font-size-16">
            <div class="agment_mdl_con__title font-size-24">
                <%= lang.text('agment_title1')%>
            </div>
            <div class="agment_mdl_con__detail mg-tp-20">
                <p>
                    <span class="font-bold-light"><%= lang.text('agment_subTitle1')%></span>
                    <%= lang.text('agment_subTitle2')%>
                    <span class="font-decoration font-bold-light"><%= lang.text('agment_subTitle3')%> </span>
                </p>
                <p class="font-decoration font-bold-light"><%= lang.text('agment_tip1')%> </p>
                <p class="font-decoration font-bold-light"><%= lang.text('agment_tip2')%>  </p>
                <p class="font-decoration font-bold-light"><%= lang.text('agment_tip3')%>  </p>
                <p><%= lang.text('agment_tip4')%>{{sysMessage.email}}</p>
                <p><span class="font-bold-light"><%= lang.text('agment_tip5')%></span> <%= lang.text('agment_tip6')%> </p>
                <p class="text-indent6"><%= lang.text('agment_tip7')%> </p>
                <p class="text-indent6"><%= lang.text('agment_tip8')%> </p>
                <p class="font-decoration font-bold-light"><%= lang.text('agment_tip9')%> </p>
                <a class="link" target="_blank" href="/agreement/client"><%= lang.text('agment_tip10')%></a>
                <a class="link" target="_blank" href="/agreement/risk"><%= lang.text('agment_tip11')%></a>
                <a class="link" target="_blank" href="/agreement/cookie"><%= lang.text('agment_tip12')%></a>
                <a class="link" target="_blank" href="/agreement/legal"><%= lang.text('agment_tip13')%></a>
                <p class="text-center mg-tp-20">
                    <span class="agreement-btn agree_button" data-btn-action="webNew.agree_user_agreement">
                        <%= lang.text('agment_btn1')%>
                    </span>
                    <span class="agree_button cancle" onclick="layer.closeAll()">
                        <%= lang.text('agment_btn2')%>
                    </span>
                </p>
            </div>
        </div>
    </div>
    <!-- web老用户 -->
    <div class="web_agreement_modal_for_layer web_old_customer">
        <div class="agment_mdl_con web font-size-16">
            <div class="agment_mdl_con__title font-size-24">
                <%= lang.text('agment_title2')%>
            </div>
            <div class="agment_mdl_con__detail mg-tp-20">
                <p class="mg-tp-20 mg-bt-20"><%= lang.text('agment_subTitle4')%></p>
                <p class="">
                    <%= lang.text('agment_subTitle5')%>
                    <a class="link" target="_blank" href="/web/blog/agreement"><%= lang.text('agment_subTitle6')%></a>
                    <%= lang.text('agment_subTitle7')%>
                </p>
                <p class="mg-tp-10">
                    <span class="font-bold-light"><%= lang.text('agment_tip5')%></span>
                    <%= lang.text('agment_tip14')%>
                </p>

                <p class="text-center mg-tp-20">
                    <span class="agreement-btn btn btn-primary-gradient" data-btn-action="webOld.agree_user_agreement">
                        <%= lang.text('agment_btn3')%>
                    </span>
                </p>
            </div>
        </div>
    </div>

    <!-- h5新用户 -->
    <div class="h5_agreement_modal_for_layer h5_new_register">
        <div class="agment_mdl_con h5">
            <div class="agment_mdl_con__title">
                <%= lang.text('agment_title1')%>
            </div>
            <p class="agree"></p>
            <div class="agment_mdl_con__detail clearfix">
                <p>
                    <span class="font-bold-light"><%= lang.text('agment_subTitle1')%></span>
                    <%= lang.text('agment_subTitle2')%>
                    <span class="font-decoration font-bold-light"><%= lang.text('agment_subTitle3')%> </span>
                </p>
                <p class="br_gap"></p>
                <p class="font-decoration font-bold-light"><%= lang.text('agment_tip1')%> </p>
                <p class="font-decoration font-bold-light"><%= lang.text('agment_tip2')%>  </p>
                <p class="font-decoration font-bold-light"><%= lang.text('agment_tip3')%>  </p>
                <p class="br_gap"></p>
                <p><%= lang.text('agment_tip4')%> <span class="sys_message_email"></span> </p>
                <p class="br_gap"></p>
                <p><span class="font-bold-light"><%= lang.text('agment_tip5')%></span> <%= lang.text('agment_tip6')%> </p>
                <p class=""><%= lang.text('agment_tip7')%> </p>
                <p class=""><%= lang.text('agment_tip8')%> </p>
                <p class="br_gap"></p>
                <p class="font-decoration font-bold-light"><%= lang.text('agment_tip9')%> </p>
                <a class="link" target="_blank" data-title="客户协议" href="/agreement/client"><%= lang.text('agment_tip10')%></a><br>
                <a class="link" target="_blank" data-title="风险披露声明" href="/agreement/risk"><%= lang.text('agment_tip11')%></a><br>
                <a class="link" target="_blank" data-title="隐私政策" href="/agreement/cookie"><%= lang.text('agment_tip12')%></a><br>
                <a class="link" target="_blank" data-title="法律声明" href="/agreement/legal"><%= lang.text('agment_tip13')%></a><br>
            </div>
            <p class="mg-tp-20 clearfix button-area">
                <span class="agreement-btn agree_button sm-size fl" data-btn-action="h5New.agree_user_agreement">
                    <%= lang.text('agment_btn1')%>
                </span>
                <span class="agree_button cancle agment_mdl_cancle fr" onclick="">
                    <%= lang.text('agment_btn2')%>
                </span>
            </p>
        </div>
    </div>

    <!-- h5老用户 -->
    <div class="h5_agreement_modal_for_layer h5_old_customer">
        <div class="agment_mdl_con h5">
            <div class="agment_mdl_con__title">
                <%= lang.text('agment_title2')%>
            </div>
            <div class="agment_mdl_con__detail">
                <p class="agree"><%= lang.text('agment_subTitle4')%></p>
                <p class="">
                    <%= lang.text('agment_subTitle5')%>
                    <a class="link" target="_blank" data-title="用户协议" href="/m/h5_register/agreement"><%= lang.text('agment_subTitle6')%></a>
                    <%= lang.text('agment_subTitle7')%>
                </p>
                <p class="mg-tp-10">
                    <span class="font-bold-light"><%= lang.text('agment_tip5')%></span>
                    <%= lang.text('agment_tip14')%>
                </p>
                <p class="text-center mg-tp-30">
                    <span class="agreement-btn agree_button" data-btn-action="h5Old.agree_user_agreement">
                        <%= lang.text('agment_btn3')%>
                    </span>
                </p>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        window.openWebAgmentModal = function (code, callback) {
            // 100402(new) 100403(old)
            var layMap = {
                "100402": {
                    layClass: ".web_new_register",
                    laySize: ['860px', '450px']
                },
                "100403": {
                    layClass: ".web_old_customer",
                    laySize: ['450px', '400px']
                }
            }
            if (!layer) return
            var layerIndex = layer.open({
                type: 1,
                skin: 'agreenment_modal__layer_skin',
                title: '',
                closeBtn: 0,
                shadeClose: false,
                shade: 0.5,
                area: layMap[code].laySize,
                content: $('.agreement_modal_for_layer__box')
                    .find(layMap[code].layClass)
                    .html()
            });

            $('.agreement-btn').on('click', function (e) {
                $.isFunction(callback) && callback.call(this, {
                    curCode: code,
                    layIndex: layerIndex
                }, e)
            })
        }

        $(document).on('click', '.agment_mdl_cancle', function (e) {
            layer.closeAll()
            if($.fn.fullpage){
                try {
                    $.fn.fullpage.setAllowScrolling(true)
                } catch (e) {
                    console.log(e);
                }
                
            }
        })

        window.openH5AgmentModal = function (code, callback) {
            // 100402(new) 100403(old)
            getEmailPhone(".sys_message_email");
            $('.agment_mdl_con__detail').css('max-height', innerSize().height * 0.6 + "px")
            var layMap = {
                "100402": {
                    layClass: ".h5_new_register",
                },
                "100403": {
                    layClass: ".h5_old_customer",
                }
            }
            if (!layer) return
            var layerIndex = layer.open({
                shadeClose: true,
                content: $('.agreement_modal_for_layer__box')
                    .find(layMap[code].layClass)
                    .html(),
                style: 'padding:0;width:100%;border-radius:0;color:#000;background:rgba(0,0,0,0);'
            });

            if($.fn.fullpage){
                try {
                    $.fn.fullpage.setAllowScrolling(false)
                } catch (e) {
                    console.log(e);
                }
                
            }

            $('.agreement-btn').on('click', function (e) {
                if($.fn.fullpage){
                    try {
                        $.fn.fullpage.setAllowScrolling(true)
                    } catch (e) {
                        console.log(e);
                    }
                    
                }
                $.isFunction(callback) && callback.call(this, {
                    curCode: code,
                    layIndex: layerIndex
                }, e)
            });

            // 三方APP中查看协议
            $(document).on('click', '.link', function (e) {
                var cb = openThirdNative({
                    type: "openUrl",
                    title: $(this).attr("data-title"),
                    url: window.location.origin+$(this).attr("href")
                });
                // console.log(cb);
                if (cb) return false;
            })
        }
    })
</script>