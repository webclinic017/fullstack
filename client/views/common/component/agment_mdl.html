<div class="agreement_modal_for_layer__box">
    <!-- web新注册 -->
    <div class="web_agreement_modal_for_layer web_new_register">
        <div class="agment_mdl_con web font-size-16">
            <div class="agment_mdl_con__title font-size-24">
                注册协议
            </div>
            <div class="agment_mdl_con__detail mg-tp-20">
                <p>
                    <span class="font-bold-light">【审慎阅读】</span>
                    您在申请注册流程中完成注册前，应当认真阅读以下协议。
                    <span class="font-decoration font-bold-light">请您务必审慎阅读、充分理解协议中《条件和条款》及相关条款内容，其中包括： </span>
                </p>
                <p class="font-decoration font-bold-light">1、与您约定免除或限制责任的条款； </p>
                <p class="font-decoration font-bold-light">2、与您约定法律适用和管辖的条款； </p>
                <p class="font-decoration font-bold-light">3、其他以粗体下划线标识的重要条款。 </p>
                <p>如您对协议有任何疑问，可拨打客服热线400-809-8509进行咨询。 </p>
                <p><span class="font-bold-light">【特别提示】</span> 当您阅读并同意协议且完成全部注册程序后，即表示您已充分阅读、理解并接受协议的全部内容。 </p>
                <p class="text-indent6">您已知晓并同意老虎外汇将为您开通巴哈马的零售客户类型账户。 </p>
                <p class="text-indent6">如您因平台服务与老虎外汇发生争议的，适用《利益冲突政策》处理。 </p>
                <p class="font-decoration font-bold-light">阅读协议的过程中，如果您不同意相关协议或其中任何条款约定，您应立即停止注册程序。 </p>
                <a class="link" target="_blank" href="/agreement/client">《客户协议》</a>
                <a class="link" target="_blank" href="/agreement/risk">《风险披露声明》</a>
                <a class="link" target="_blank" href="/agreement/cookie">《隐私政策》</a>
                <a class="link" target="_blank" href="/agreement/legal">《法律声明》</a>
                <p class="text-center mg-tp-20">
                    <span class="agreement-btn agree_button" data-btn-action="webNew.agree_user_agreement">
                        同意协议
                    </span>
                    <span class="agree_button cancle" onclick="layer.closeAll()">
                        取消
                    </span>
                </p>
            </div>
        </div>
    </div>
    <!-- web老用户 -->
    <div class="web_agreement_modal_for_layer web_old_customer">
        <div class="agment_mdl_con web font-size-16">
            <div class="agment_mdl_con__title font-size-24">
                温馨提示
            </div>
            <div class="agment_mdl_con__detail mg-tp-20">
                <p class="mg-tp-20 mg-bt-20">尊敬的用户，您好：</p>
                <p class="">
                    我们更新了服务协议，协议中有对您权利义务特别约定以及管辖约定等重要条款。请
                    <a class="link" target="_blank" href="/web/blog/agreement">点击此处</a>
                    查看。
                </p>
                <p class="mg-tp-10">
                    <span class="font-bold-light">【特别提示】</span>
                    如果您继续使用我们的服务，表示您已充分阅读、理解并接受协议的全部内容。阅读过程中有任何疑问，可拨打客服热线进行咨询。如您不同意协议中任何条款，您应立即停止使用服务。
                </p>

                <p class="text-center mg-tp-20">
                    <span class="agreement-btn btn btn-primary-gradient" data-btn-action="webOld.agree_user_agreement">
                        知道了
                    </span>
                </p>
            </div>
        </div>
    </div>

    <!-- h5新用户 -->
    <div class="h5_agreement_modal_for_layer h5_new_register">
        <div class="agment_mdl_con h5">
            <div class="agment_mdl_con__title">
                注册协议
            </div>
            <p class="agree"></p>
            <div class="agment_mdl_con__detail clearfix">
                <p>
                    <span class="font-bold-light">【审慎阅读】</span>
                    您在申请注册流程中完成注册前，应当认真阅读以下协议。
                    <span class="font-decoration font-bold-light">请您务必审慎阅读、充分理解协议中《条件和条款》及相关条款内容，其中包括： </span>
                </p>
                <p class="br_gap"></p>
                <p class="font-decoration font-bold-light">1、与您约定免除或限制责任的条款； </p>
                <p class="font-decoration font-bold-light">2、与您约定法律适用和管辖的条款； </p>
                <p class="font-decoration font-bold-light">3、其他以粗体下划线标识的重要条款。 </p>
                <p class="br_gap"></p>
                <p>如您对协议有任何疑问，可拨打客服热线400-809-8509进行咨询。 </p>
                <p class="br_gap"></p>
                <p><span class="font-bold-light">【特别提示】</span> 当您阅读并同意协议且完成全部注册程序后，即表示您已充分阅读、理解并接受协议的全部内容。 </p>
                <p class="">您已知晓并同意老虎外汇将为您开通巴哈马的零售客户类型账户。 </p>
                <p class="">如您因平台服务与老虎外汇发生争议的，适用《利益冲突政策》处理。 </p>
                <p class="br_gap"></p>
                <p class="font-decoration font-bold-light">阅读协议的过程中，如果您不同意相关协议或其中任何条款约定，您应立即停止注册程序。 </p>
                <a class="link" target="_blank" data-title="客户协议" href="/agreement/client">《客户协议》</a><br>
                <a class="link" target="_blank" data-title="风险披露声明" href="/agreement/risk">《风险披露声明》</a><br>
                <a class="link" target="_blank" data-title="隐私政策" href="/agreement/cookie">《隐私政策》</a><br>
                <a class="link" target="_blank" data-title="法律声明" href="/agreement/legal">《法律声明》</a><br>
            </div>
            <p class="mg-tp-20 clearfix button-area">
                <span class="agreement-btn agree_button sm-size fl" data-btn-action="h5New.agree_user_agreement">
                    同意协议
                </span>
                <span class="agree_button cancle agment_mdl_cancle fr" onclick="">
                    取消
                </span>
            </p>
        </div>
    </div>

    <!-- h5老用户 -->
    <div class="h5_agreement_modal_for_layer h5_old_customer">
        <div class="agment_mdl_con h5">
            <div class="agment_mdl_con__title">
                温馨提示
            </div>
            <div class="agment_mdl_con__detail">
                <p class="agree">尊敬的用户，您好：</p>
                <p class="">
                    我们更新了服务协议，协议中有对您权利义务特别约定以及管辖约定等重要条款。请
                    <a class="link" target="_blank" data-title="用户协议" href="/m/h5_register/agreement">点击此处</a>
                    查看。
                </p>
                <p class="mg-tp-10">
                    <span class="font-bold-light">【特别提示】</span>
                    如果您继续使用我们的服务，表示您已充分阅读、理解并接受协议的全部内容。阅读过程中有任何疑问，可拨打客服热线进行咨询。如您不同意协议中任何条款，您应立即停止使用服务。
                </p>
                <p class="text-center mg-tp-30">
                    <span class="agreement-btn agree_button" data-btn-action="h5Old.agree_user_agreement">
                        知道了
                    </span>
                </p>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        window.openWebAgmentModal = function (code, callback) {
            // 100402(new) 100403(old)
            var layMap = {
                "100402": {
                    layClass: ".web_new_register",
                    laySize: ['860px', '450px']
                },
                "100403": {
                    layClass: ".web_old_customer",
                    laySize: ['450px', '400px']
                }
            }
            if (!layer) return
            var layerIndex = layer.open({
                type: 1,
                skin: 'agreenment_modal__layer_skin',
                title: '',
                closeBtn: 0,
                shadeClose: false,
                shade: 0.5,
                area: layMap[code].laySize,
                content: $('.agreement_modal_for_layer__box')
                    .find(layMap[code].layClass)
                    .html()
            });

            $(document).on('click', '.agreement-btn', function (e) {
                $.isFunction(callback) && callback.call(this, {
                    curCode: code,
                    layIndex: layerIndex
                }, e)
            })
        }

        $(document).on('click', '.agment_mdl_cancle', function (e) {
            layer.closeAll()
            if($.fn.fullpage){
                try {
                    $.fn.fullpage.setAllowScrolling(true)
                } catch (e) {
                    console.log(e);
                }
                
            }
        })

        window.openH5AgmentModal = function (code, callback) {
            // 100402(new) 100403(old)
            var layMap = {
                "100402": {
                    layClass: ".h5_new_register",
                },
                "100403": {
                    layClass: ".h5_old_customer",
                }
            }
            if (!layer) return
            var layerIndex = layer.open({
                shadeClose: true,
                content: $('.agreement_modal_for_layer__box')
                    .find(layMap[code].layClass)
                    .html(),
                style: 'padding:0;width:100%;border-radius:0;color:#000;background:rgba(0,0,0,0);'
            });

            if($.fn.fullpage){
                try {
                    $.fn.fullpage.setAllowScrolling(false)
                } catch (e) {
                    console.log(e);
                }
                
            }

            $(document).on('click', '.agreement-btn', function (e) {
                if($.fn.fullpage){
                    try {
                        $.fn.fullpage.setAllowScrolling(true)
                    } catch (e) {
                        console.log(e);
                    }
                    
                }
                $.isFunction(callback) && callback.call(this, {
                    curCode: code,
                    layIndex: layerIndex
                }, e)
            })

            // 三方APP中查看协议
            $(document).on('click', '.link', function (e) {
                var cb = openThirdNative({
                    type: "openUrl",
                    title: $(this).attr("data-title"),
                    url: window.location.origin+$(this).attr("href")
                });
                // console.log(cb);
                if (cb) return false;
            })
        }
    })
</script>