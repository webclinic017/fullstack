<script>
    (function (doc, win) {
        //设计图的宽度
        var viewBase = 750;
        var fontBase = 32; //css文件中font-base ，基于该值计算rem值
        var docEl = doc.documentElement,
            resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
            recalc = function () {
                var clientWidth = docEl.clientWidth;
                if (!clientWidth || clientWidth > viewBase) {
                    return;
                }
                docEl.style.fontSize = fontBase * (clientWidth / viewBase) + 'px';
            };
        recalc();
        if (!doc.addEventListener) {
            return;
        }
        win.addEventListener(resizeEvt, recalc, false);
        doc.addEventListener('DOMContentLoaded', recalc, false);
    })(document, window);


    //native和h5通讯
    function callNative(oAction) {
        var sAction = JSON.stringify(oAction);
        //IOS和Android均会在页面写入该对象。只是调用方法略不同
        if (isIOS()) {
            TigerwitNative(sAction);
        } else {
            TigerwitNative.jsCall(sAction);
        }
        return true;
    }

    //第三方native和h5通讯
    function openThirdNative(oAction) {
        try {
            var sAction = JSON.stringify(oAction);
            //IOS和Android均会在页面写入该对象。只是调用方法略不同
            if (isIOS()) {
                CallThirdNative(sAction);
            } else {
                CallThirdNative.jsCall(sAction);
            }
            return true;
        } catch (e) {
            return false;
        }

    }

    /*判断是否在APP中*/
    function isInTiger() {
        var userPlatForm = window.navigator.userAgent;
        var flag1 = userPlatForm.indexOf("tigerwit_app");
        var flag3 = userPlatForm.indexOf("tigerwell");
        var flag2 = userPlatForm.indexOf("panda_app");
        if (flag1 >= 0 || flag2 >= 0 || flag3 >= 0) {
            return true;
        } else {
            return false;
        }
    }

    function isTigerSpecial() {
        var userPlatForm = window.navigator.userAgent;
        return userPlatForm.indexOf("tiger_special") != -1;
    }

    function isAndriod() {
        var bIsAndroid = navigator.userAgent.toLowerCase().match(/android/i) == "android";
        return bIsAndroid;
    }

    function getVersionName() {
        var userAgent = window.navigator.userAgent;
        var targetStr = 'tiger_version=';
        if (userAgent.indexOf(targetStr) != -1) {
            return userAgent.substr(userAgent.indexOf(targetStr) + targetStr.length, 5);
        }
    }

    function isIOS() {
        return /like Mac OS X/.test(navigator.userAgent);
    }

    /*
     判断是否在tigerwit公司
     */
    function isTigerCo() {
        if ($.cookie('company_name') == 'tigerwit') {
            return true;
        } else {
            return false;
        }
    }

    function getCoName() {
        return $.cookie('company_name')
    }

    /**
     * 兼容安卓页面下拉刷新问题
     * */
    function offsetAction(index) {
        /*debug*/
        if (!isIOS() && isInTiger()) {
            callNative({
                type: 'offset',
                offset: index - 1
            })
        }
    }

    /*
        获取高度
    */
    function getClientHeight() {
        return (document.body.clientHeight || document.documentElement.clientHeight);
    }

    /**
     * [isMobile 判断平台]
     * @param test: 0:iPhone    1:Android
     */
    function ismobile(test) {
        var u = navigator.userAgent, app = navigator.appVersion;
        if (/AppleWebKit.*Mobile/i.test(navigator.userAgent) || (/MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(navigator.userAgent))) {
            if (window.location.href.indexOf("?mobile") < 0) {
                try {
                    if (/iPhone|mac|iPod|iPad/i.test(navigator.userAgent)) {
                        return '0';
                    } else {
                        return '1';
                    }
                } catch (e) {
                }
            }
        } else if (u.indexOf('iPad') > -1) {
            return '0';
        } else {
            return '1';
        }
    };

    function getSearch() {
        var url = location.search;
        /*获取url中"?"符后的字串*/
        var theRequest = new Object();
        if (url.indexOf("?") != -1) {
            var str = url.substr(1);
            strs = str.split("&");
            for (var i = 0; i < strs.length; i++) {
                theRequest[strs[i].split("=")[0]] = (strs[i].split("=")[1]);
            }
        }
        return theRequest;
    }

    function debugAndroidKey(conf) {
        if (!isIOS() || isAndriod()) {
            // 移除resize 事件
            $(window).on('resize', function () {
                var cvs = document.createElement('canvas');
                cvs.width = 0;
                cvs.height = 0;
                document.appendChild(cvs);
            });

            var focusFlag = false;
            var $element = $(conf.focusSelector);
            var $reg_box = $(conf.ctrlBox);
            var initClientHeight = getClientHeight();
            var focusClientHeight = null;

            $element.focus(function () {
                focusFlag = true;
                focusClientHeight = getClientHeight();
                $reg_box.css(conf.focusCss);
                $.isFunction(conf.focusFn) && conf.focusFn();
            });

            $element.blur(function () {
                focusFlag = false;
                $reg_box.css(conf.blurCss);
                $.isFunction(conf.blurFn) && conf.blurFn();
            });

            window.addEventListener('resize', function () {
                // console.log(getClientHeight());
                setTimeout(function () {
                    if (getClientHeight() == focusClientHeight) {
                        $reg_box.css(conf.blurCss);
                    } else {
                        $reg_box.css(conf.focusCss);
                    }
                }, 10);
            })
        }
    }

    function innerSize() {
        return {
            width: window.innerWidth
                || document.documentElement.clientWidth
                || document.body.clientWidth,

            height: window.innerHeight
                || document.documentElement.clientHeight
                || document.body.clientHeight
        }
    }

    var langData = {
        tiger: {
            zh: '老虎外汇',
            en: 'Tigerwit'
        },
        pandafx: {
            zh: '熊猫外汇',
            en: 'Panda'
        },
        invite: {
            registerd: {
                zh: '此号码已注册!',
                en: 'This No. has been registerd!'
            },
            effcient: {
                zh: '请输入有效的手机号!',
                en: 'Please input an effcient phone No.'
            },
            Lapsed: {
                zh: '已失效',
                en: 'Lapsed'
            },
            Expired: {
                zh: '已过期',
                en: 'Expired'
            },
            Unexchangeable: {
                zh: '不可兑换',
                en: 'Unexchangeable'
            },
            Exchanged: {
                zh: '已兑换',
                en: 'Exchanged'
            },
            get$10: {
                zh: '点击领取10美金',
                en: 'Tap to receive $10'
            },
            share1: {
                zh: '领了2000美金，好东西必须分享，你也快来看看！',
                en: 'received $ 200 Coupons from TigerWit, Come and see!'
            },
            share2: {
                zh: '你投资，我出钱！注册就送2000美金',
                en: 'Register to receive a $ 200 coupons'
            },
            share3: {
                zh: '我刚刚在',
                en: 'I just '
            }
        },
        register: {
            areaCode: {
                zh: '区号',
                en: 'Area Code',
            },
            areaCodeErr: {
                zh: '请选择区号',
                en: 'Please Select the area code',
            },
            code: {
                zh: '请一分钟后再试！',
                en: 'Please try after 1 minute!',
            },
            code1: {
                zh: '请输入验证码!',
                en: 'Please input the verify code!',
            },
            codeSent: {
                zh: '验证码已发送',
                en: 'Verify code has been sent',
            },
            resendCode: {
                zh: '重新获取',
                en: 'resend',
            },
            networkErr: {
                zh: '网络异常,请刷新重试!',
                en: 'network error',
            },
            registerd: {
                zh: '此号码已注册!',
                en: 'This No. has been registerd!'
            },
            effcient: {
                zh: '请输入有效的手机号!',
                en: 'Please input an effcient phone No.'
            },
            password: {
                zh: '密码为6-15位字母、数字或符号组合',
                en: 'Password was combined by letters, Numbers and symbols, combination of two or more length is 6 to 15 characters'
            }
        }
    }

    var lang = {
        text: function (moduleName) {
            var curLang = $.cookie('lang') || 'zh'
            var moduleNameInfo = moduleName.split('.'), area = '', name = ""
            if (moduleNameInfo.length == 2) {
                area = moduleNameInfo[0]
                name = moduleNameInfo[1]
                return langData[area][name][curLang]
            } else {
                name = moduleNameInfo[0]
                return langData[name][curLang]
            }
        },
        curLang: function(lang){
            if(lang){
                return $.cookie('lang') == lang
            } else {
                return $.cookie('lang') || 'zh'
            }
        }
    }
</script>