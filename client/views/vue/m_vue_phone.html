<div class="m_vue" data-page="phone">
    <div id="m_vue_phone" v-cloak>
        <validator name="checkTel">
            <div class="form-control-wrapper">
                <input class="form-control m_vue_form-control" 
                       name="phone" 
                       type="number"
                       placeholder="新手机号码"
                       initial="off"
                       :class="{'form-control-error': frontErr.phone.show && $checkTel.phone.noempty}"
                       v-validate:phone="['noempty','phoneErr']"
                       v-model="phone"
                       @focus="hideFrontErr('phone')"
                       @blur="showFrontErr('phone')">
                
                <i class="form-control-icon fa fa-mobile-phone"></i>

                <div v-show="frontErr.phone.show">
                    <p class="alert-arrow_tp_lf" v-show="$checkTel.phone.noempty">
                        请输入新手机号码
                    </p>
                    <p class="alert-arrow_tp_lf" v-show="$checkTel.phone.phoneErr && !$checkTel.phone.noempty">
                        手机号码格式不正确
                    </p>
                    <p class="alert-arrow_tp_lf" v-show="$checkTel.phone.exist">
                        手机号码已存在
                    </p>
                </div>
            </div>
            
            <div class="row">
                <div class="col-xs-6">
                    <div class="form-control-wrapper">
                        <input class="form-control m_vue_form-control" 
                               name="verifyCode" 
                               type="text"
                               placeholder="验证码"
                               required
                               ng-class="{'form-control-error': (frontErr.verifyCode.show && phoneForm.verifyCode.$invalid) || (backErr.verifyCode.show && backErr.verifyCode.status > 0)}"
                               ng-model="phone.verifyCode"
                               ng-focus="hideErr('verifyCode')"
                               ng-blur="showErr('verifyCode')">
                        
                        <i class="form-control-icon fa fa-pencil"></i>

                        <div ng-show="frontErr.verifyCode.show">
                            <p class="alert-arrow_tp_lf" ng-show="phoneForm.verifyCode.$error.required">
                                请输入验证码
                            </p>
                        </div>

                        <div ng-show="backErr.verifyCode.show">
                            <p class="alert-arrow_tp_lf" ng-show="backErr.verifyCode.status === 1">
                                验证码不正确
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-xs-6">
                    <div class="relative">
                        <button class="btn btn-lg primary-bg btn-info" tw-verify-timer start-timer="startTimer" is-voice-code="isVoiceCode" verify-code-btn-clickable="clickable.verifyCode" ng-disabled="!clickable.verifyCode" ng-click="getVerifyCode()">
                            获取验证码
                        </button>

                        <div ng-show="backErr.verifyCodeBtn.show">
                            <p class="alert-arrow_tp_lf" ng-show="backErr.verifyCodeBtn.status == 1">
                                1 分钟内只可发送 1 次验证码
                            </p>

                            <p class="alert-arrow_tp_lf" ng-show="backErr.verifyCodeBtn.status == 2">
                                1 小时内只可发送 10 次验证码
                            </p>

                            <p class="alert-arrow_tp_lf" ng-show="backErr.verifyCodeBtn.status == 5">
                                验证码发送失败
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="text-center" v-show="backErr.show">
                <p class="alert-system">
                    {{ backErr.msg || '提交失败' }}
                </p>
            </div>

            <button @click="submitPhone" class="btn btn-primary primary-bg btn-lg mg-tp-20" v-if="clickable.submit">
                提交
            </button>

            <button class="btn btn-info btn-lg primary-bg mg-tp-20" v-if="!clickable.submit">
                <i class="loading fa fa-spinner"></i>
                提交中
            </button>
        </validator>
    </div>
</div>
