;(function () {    'use strict';    angular        .module('fullstackApp')        .controller('HelpController', HelpController);    HelpController.$inject = ['$scope'];    function HelpController($scope) {        /*搜索高亮控制*/        var search_text = document.getElementById("search_text");        window.help = {};        $scope.searchWords = "";        $scope.text = "";        $scope.origin = "";        window.onload = function () {            window.help.HTML = angular.element("#search_text").html();            $scope.$apply();        };        $scope.refreshHTML = function () {            setTimeout(function(){                console.log("refreshHTML");                window.help.HTML = angular.element("#search_text").html();            },100);        };        $scope.highlight = function (e) {            var keycode = window.event ? e.keyCode : e.which;            if ($scope.searchWords == "") {                document.getElementById("search_text").innerHTML = window.help.HTML;            } else if (keycode == 13) {                $scope.handle();            }        };        $scope.handle = function () {            if (!(/[\u4e00-\u9fa5]/.test($scope.searchWords))) return;            var search = escape($scope.searchWords);            var regex = new RegExp(search, 'g');            var result = escape(document.getElementById("search_text").innerHTML).replace(regex, '<hightLight class="highlightedText target">' + $scope.searchWords + '</hightLight>');            document.getElementById("search_text").innerHTML = unescape(result);        }            /*控制sidebar的位置*/        ;        (function () {            var sidebar = document.getElementById("sidebar");            var sidebar_ratio = 0.15625;            var main_ratio = 1 - sidebar_ratio;            var help_layout = document.getElementById("help_layout");            var help_content = document.getElementById("help_content");            var menu_btn = document.getElementById("menu_btn");            var sidebar_width = getStyle(sidebar, "width");            var activeFlag = $scope.activeFlag = false;            function setPadding(dis) {                help_layout.style.paddingLeft = dis + "px";            }            function sidebarOpen() {                sidebar.style.left = 0;                setPadding(getStyle(sidebar, "width"));                $scope.activeFlag = true;                activeFlag = true;            }            function sidebarClose() {                sidebar.style.left = "-15.625%";                setPadding(0);                $scope.activeFlag = false;                activeFlag = false;            }            $scope.shiftMenu = function () {                if ($scope.activeFlag) {                    sidebarClose();                } else {                    sidebarOpen();                }            };            $scope.closeMenu = function () {                sidebarClose();            };            function getStyle(obj, name) {                if (obj.currentStyle) {                    return parseInt(obj.currentStyle[name])                } else {                    return parseInt(getComputedStyle(obj, false)[name])                }            }            function setStyle(flag) {                var clientWidth = document.documentElement.clientWidth;                var clientHeight = document.documentElement.clientHeight;                help_layout.style.height = clientHeight + "px";                help_layout.style.minWidth = clientHeight + "px";                sidebar.style.height = clientHeight + "px";                if ($scope.activeFlag) {                    setPadding(getStyle(sidebar, "width"));                }            }            setStyle();            sidebarOpen();            window.onresize = function () {                var clientWidth = document.documentElement.clientWidth;                var clientHeight = document.documentElement.clientHeight;                if (clientWidth <= 1030) {                    window.width = 1030;                }                help_layout.style.height = clientHeight + "px";                sidebar.style.height = clientHeight + "px";                sidebarOpen();                if ($scope.activeFlag) {                    setPadding(getStyle(sidebar, "width"));                }            }        }());    }})();